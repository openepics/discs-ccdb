<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <cc:interface>
        <cc:attribute name="id" required="true" />
        <cc:attribute name="controllerBean" required="true" />
        <cc:attribute name="updateTargets" />
    </cc:interface>

    <cc:implementation> 
        <p:dataTable id="#{cc.attrs.id}" var="attribute" value="#{cc.attrs.controllerBean.attributes}" 
                style="table-layout: fixed; word-wrap: break-word; margin-top: 1em;" rows="15" 
                paginator="true" paginatorPosition="bottom">
            <p:column headerText="Name" sortBy="#{attribute.name}">
                <h:outputText value="#{attribute.name}" />
            </p:column>
    
            <p:column headerText="Value" style="width: 30%">
                <h:outputText value="#{!empty attribute.value ? attribute.value : '-'}" />
            </p:column>
    
            <p:column headerText="Unit">
                <h:outputText value="#{!empty attribute.unit ? attribute.unit.name : '-'}" />
            </p:column>
    
            <p:column headerText="Kind">
                <h:outputText value="#{attribute.kind.toString()}" />
            </p:column>
    
            <p:column headerText="Data type">
                <h:outputText value="#{!empty attribute.type ? attribute.type.name : '-'}" />
            </p:column>
    
            <p:column headerText="Actions" width="70">
                <p:commandLink ajax="true" title="Edit" update="#{cc.attrs.updateTargets}" 
                        rendered="#{cc.attrs.controllerBean.canEdit(attribute)}">
                    <h:outputText styleClass="ui-icon ui-icon-pencil" style="display: inline-block !important; margin-right: 6px;" />
                    <f:setPropertyActionListener value="#{attribute}" target="#{cc.attrs.controllerBean.selectedAttributeToModify}" />
                </p:commandLink>
                <p:commandLink ajax="true" title="Delete" oncomplete="deleteAttribute.show()"
                        rendered="#{cc.attrs.controllerBean.canDelete(attribute)}">
                    <h:outputText styleClass="ui-icon ui-icon-trash" style="display: inline-block !important; margin-right: 6px;" />
                    <f:setPropertyActionListener value="#{attribute}" target="#{cc.attrs.controllerBean.selectedAttribute}" />
                </p:commandLink>
                <p:commandLink ajax="false" title="Download" rendered="#{attribute.hasFile}">
                    <h:outputText styleClass="ui-icon ui-icon-arrowthick-1-s" style="display: inline-block !important; margin-right: 6px;" />
                    <f:setPropertyActionListener value="#{attribute}" target="#{cc.attrs.controllerBean.selectedAttribute}" />
                    <p:fileDownload value="#{cc.attrs.controllerBean.downloadFile}" />
                </p:commandLink>
                <h:outputLink rendered="#{attribute.hasURL}" title="Go to URL" target="_blank" value="#{attribute.value}">
                    <h:outputText styleClass="ui-icon ui-icon-extlink" style="display: inline-block !important; margin-right: 6px;" />
                </h:outputLink>
            </p:column>
        </p:dataTable>                    
    </cc:implementation>
</html>