<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:p="http://primefaces.org/ui" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html">

    <h:form id="#{formId}">
        <p:dialog widgetVar="#{widgetName}" id="#{widgetName}" modal="true" resizable="false" dynamic="true" width="55em">

            <f:facet name="header">
                <h:outputText value="#{dialogTitle}" />
            </f:facet>

            <p:panelGrid styleClass="noBorders">
                <p:row>
                    <p:column>
                        <h:outputText value="Device type: " />
                    </p:column>
                    <p:column>
                        <h:outputText value="#{slot.componentType.name}" />
                    </p:column>
                </p:row>
                <p:row>
                    <p:column>
                        <h:outputText value="Installation slot path: " />
                    </p:column>
                    <p:column>
                        <h:outputText value="#{hierarchiesController.getInstallationSlotPath()}" />
                    </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="2">
                        <p:dataTable var="device" value="#{hierarchiesController.uninstalledDevices}" 
                                selectionMode="single" selection="#{hierarchiesController.deviceToInstall}" 
                                rowKey="#{device.id}" scrollable="true" scrollHeight="180" 
                                filteredValue="#{hierarchiesController.filteredUninstalledDevices}" 
                                emptyMessage="No device available for installation.">
                            <p:ajax event="rowSelect" update=":#{formId}:installButton" />
                            <p:ajax event="rowUnselect" update=":#{formId}:installButton" />
                            <p:column headerText="Inventory Id" sortBy="#{device.serialNumber}" 
                                    filterBy="#{device.serialNumber}" filterMatchMode="contains">
                                <h:outputText value="#{device.serialNumber}" />
                            </p:column>
                        </p:dataTable>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="2">
                        <p:commandButton title="Cancel" styleClass="dialogButton" label="Cancel" value="Cancel" 
                            onclick="PF('#{widgetName}').hide();" resetValues="true" update=":#{formId}" ajax="true" 
                            action="#{hierarchiesController.setDeviceToInstall(null)}" />
                        <p:commandButton id="installButton" styleClass="dialogButton" title="Install" label="Install" 
                            disabled="#{empty hierarchiesController.deviceToInstall}" value="Install" 
                            action="#{hierarchiesController.installDevice()}" update="#{componentToUpdate} :#{formId}" 
                            oncomplete="PF('#{widgetName}').hide();hierarchiesResizeAll();" />
                    </p:column>
                </p:row>
            </p:panelGrid>

        </p:dialog>
    </h:form>
</ui:composition>