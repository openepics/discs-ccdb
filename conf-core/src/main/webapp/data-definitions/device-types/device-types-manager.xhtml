<ui:composition template="../template.xhtml" 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <ui:define name="dataDefContent">
	    <h:form id="deviceTypesForm">
	        <p:commandButton ajax="true"
	            actionListener="#{componentTypeManager.prepareAddPopup()}" value="Add new"
	            oncomplete="addDeviceType.show()" />
	        <p:dataTable var="deviceType" value="#{componentTypeManager.objects}" resizableColumns="true" 
                style="table-layout: fixed; word-wrap: break-word;" filteredValue="#{componentTypeManager.filteredObjects}"
	            rows="15" paginator="true" paginatorPosition="bottom">
	            <p:column headerText="Name" sortBy="#{deviceType.name}" filterBy="#{deviceType.name}" width="20%">
	                <h:outputText value="#{deviceType.name}" />
	            </p:column>
	
	            <p:column headerText="Description" filterBy="#{deviceType.description}" width="65%">
	                <h:outputText value="#{deviceType.description}" />
	            </p:column>
	
	            <p:column headerText="Actions" width="92" style="text-align: center;">
                    <p:commandLink ajax="true" title="Add properties" action="#{componentTypeManager.deviceTypePropertyRedirect(deviceType.id)}">
                        <h:outputText styleClass="ui-icon ui-icon-contact" style="display: inline-block !important; margin-right: 6px;" />
                    </p:commandLink>
                    <p:commandLink ajax="true" title="Edit" update=":modifyDeviceTypeForm" oncomplete="modifyDeviceType.show()">
                        <h:outputText styleClass="ui-icon ui-icon-pencil" style="display: inline-block !important; margin-right: 6px;" />
                        <f:setPropertyActionListener value="#{deviceType}" target="#{componentTypeManager.selectedDeviceTypeToModify}" />
                    </p:commandLink>
                    <p:commandLink ajax="true" title="Delete" oncomplete="deleteDeviceType.show()">
                        <h:outputText styleClass="ui-icon ui-icon-trash" style="display: inline-block !important; margin-right: 6px;" />
                        <f:setPropertyActionListener value="#{deviceType}" target="#{componentTypeManager.selectedDeviceType}" />
                    </p:commandLink>
                    <p:commandLink ajax="true" title="Log" update=":deviceTypeLogForm" oncomplete="deviceTypeLog.show()">
                        <h:outputText styleClass="ui-icon ui-icon-clock" style="display: inline-block !important; margin-right: 6px;" />
                        <f:ajax event="click" listener="#{auditManager.selectEntityForLog(deviceType, 'COMPONENT_TYPE')}" />
                    </p:commandLink>
	                <!-- <p:commandButton icon="ui-icon-copy" title="Create copy" ajax="true" oncomplete="deviceTypeLog.show()">
	                    <f:setPropertyActionListener value="#{deviceType}" target="#{componentTypeManager.selectedDeviceTypeForLog}" />
	                </p:commandButton> -->
	            </p:column>
	        </p:dataTable>
	    </h:form>
	    
	    <ui:include src="../add-or-modify-dialogs/delete-confirmation.xhtml" >
                <ui:param name="formId" value="deleteDeviceTypeForm" />
                <ui:param name="dialogTitle" value="Delete device type" />
                <ui:param name="widgetName" value="deleteDeviceType" />
                <ui:param name="controller" value="#{componentTypeManager}" />
                <ui:param name="submitHandler" value="onDelete" />
                <ui:param name="formToUpdate" value=":deviceTypesForm" />
        </ui:include>
        
        <ui:include src="../add-or-modify-dialogs/device-type.xhtml">
	        <ui:param name="formId" value="modifyDeviceTypeForm" />
	        <ui:param name="dialogTitle" value="Modify Device Type" />
	        <ui:param name="widgetName" value="modifyDeviceType" />
	        <ui:param name="submitHandler" value="onModify" />
	    </ui:include>
	    
	    <ui:include src="../add-or-modify-dialogs/device-type.xhtml">
	        <ui:param name="formId" value="addDeviceTypeForm" />
	        <ui:param name="dialogTitle" value="Add Device Type" />
	        <ui:param name="widgetName" value="addDeviceType" />
	        <ui:param name="submitHandler" value="onAdd" />
	    </ui:include>
	    
	    <ui:include src="../../audit/audit-log-table.xhtml">
	        <ui:param name="formId" value="deviceTypeLogForm" />
	        <ui:param name="dialogTitle" value="Device Type Log" />
	        <ui:param name="widgetName" value="deviceTypeLog" />
	    </ui:include>
	    
	</ui:define>
</ui:composition>